WEBVTT
Kind: captions
Language: zh-Hans

00:00:00.000 --> 00:00:03.629
哈雷尔我又回来谈论

00:00:01.709 --> 00:00:05.009
这次我要建立相机

00:00:03.629 --> 00:00:06.480
谈论实际控制

00:00:05.009 --> 00:00:08.730
设备相机并拍照

00:00:06.480 --> 00:00:10.260
我已经说过了

00:00:08.730 --> 00:00:11.969
不用的时候拿一张图片

00:00:10.260 --> 00:00:13.320
访问相机，所以在这里我们不

00:00:11.969 --> 00:00:15.420
不得不非常担心

00:00:13.320 --> 00:00:17.670
兼容性，除了确保

00:00:15.420 --> 00:00:20.400
我们使用功能检测来禁用此功能

00:00:17.670 --> 00:00:22.439
不能使用的功能

00:00:20.400 --> 00:00:24.029
 Safari 11发布时发生的情况

00:00:22.439 --> 00:00:25.740
所有最新的稳定版本

00:00:24.029 --> 00:00:28.019
现在主要的浏览器实际上都支持

00:00:25.740 --> 00:00:30.420
 getusermedia API是核心

00:00:28.019 --> 00:00:32.309
我们需要的功能，让我们来

00:00:30.420 --> 00:00:33.690
看看我如何处理所有这些

00:00:32.309 --> 00:00:36.239
说我们需要做的第一件事

00:00:33.690 --> 00:00:38.430
就是特征检测，所以我有一个

00:00:36.239 --> 00:00:40.590
这里的常量文件只有一个

00:00:38.430 --> 00:00:44.730
几件事，所以我正在检查

00:00:40.590 --> 00:00:46.110
窗口中的图像捕获对象和

00:00:44.730 --> 00:00:48.840
我正在检查媒体设备

00:00:46.110 --> 00:00:51.420
导航器中的对象，我们将使用它们来

00:00:48.840 --> 00:00:54.320
确定这两个API实际上

00:00:51.420 --> 00:00:57.570
存在，所以我提取了所有

00:00:54.320 --> 00:00:59.309
我的应用程式与相机相关的程式码

00:00:57.570 --> 00:01:01.800
我刚刚打电话给的帮助类

00:00:59.309 --> 00:01:03.600
相机助手，这将处理所有

00:01:01.800 --> 00:01:05.460
与设备的互动

00:01:03.600 --> 00:01:07.680
 UI层可以集中精力

00:01:05.460 --> 00:01:09.299
关于如何将这些信息呈现给

00:01:07.680 --> 00:01:12.630
用户，所以我们要做的第一件事

00:01:09.299 --> 00:01:14.040
需要做的是该功能是否

00:01:12.630 --> 00:01:16.770
在浏览器中没有

00:01:14.040 --> 00:01:19.409
其实是说我们有一台相机，所以我们

00:01:16.770 --> 00:01:21.150
需要一种让UI层确定的方法

00:01:19.409 --> 00:01:23.070
可用的相机是

00:01:21.150 --> 00:01:26.070
这种方法是什么让他们拿到相机

00:01:23.070 --> 00:01:29.549
如果媒体设备api是

00:01:26.070 --> 00:01:30.420
可用，那么我们将使用

00:01:29.549 --> 00:01:32.880
航海家

00:01:30.420 --> 00:01:35.369
媒体设备枚举devayne设备

00:01:32.880 --> 00:01:37.920
掌握所有媒体的方法

00:01:35.369 --> 00:01:39.720
连接到我们手机的设备

00:01:37.920 --> 00:01:42.600
或笔记本电脑之类的东西

00:01:39.720 --> 00:01:45.240
包括摄像机以及

00:01:42.600 --> 00:01:48.270
麦克风，然后我们将其过滤为

00:01:45.240 --> 00:01:51.030
仅获取具有视频输入的设备

00:01:48.270 --> 00:01:53.490
设备，然后我们将其返回，如果

00:01:51.030 --> 00:01:55.140
如果此API不可用，则获取

00:01:53.490 --> 00:01:57.899
相机，我们将返回一个空数组

00:01:55.140 --> 00:01:59.729
用户界面知道有摄像头后

00:01:57.899 --> 00:02:01.799
可以打电话给我们说

00:01:59.729 --> 00:02:04.740
想开始一个流，它可以通过

00:02:01.799 --> 00:02:06.659
在设备ID中，现在该设备ID 

00:02:04.740 --> 00:02:09.119
从将返回的对象

00:02:06.659 --> 00:02:12.180
拿相机，这可以让用户界面

00:02:09.119 --> 00:02:14.069
说它特别想要一个

00:02:12.180 --> 00:02:16.469
那些相机，所以这允许

00:02:14.069 --> 00:02:19.019
用于UI功能，例如在

00:02:16.469 --> 00:02:21.480
前置和后置摄像头

00:02:19.019 --> 00:02:23.219
或者只是从

00:02:21.480 --> 00:02:25.769
例如，当我们

00:02:23.219 --> 00:02:29.040
实际想从

00:02:25.769 --> 00:02:32.909
相机，我们需要使用导航器

00:02:29.040 --> 00:02:35.790
媒体设备getusermedia调用以获取

00:02:32.909 --> 00:02:38.819
流和这里的一些术语

00:02:35.790 --> 00:02:41.879
如果您有点困惑

00:02:38.819 --> 00:02:45.090
超载的单词，所以从一个开始

00:02:41.879 --> 00:02:47.340
流只是一堆媒体

00:02:45.090 --> 00:02:49.829
信息将包括轨道

00:02:47.340 --> 00:02:54.030
一个或多个轨道以及那些轨道

00:02:49.829 --> 00:02:55.829
可能是视频或音频本身的理论

00:02:54.030 --> 00:02:58.079
流可以有多个视频用于

00:02:55.829 --> 00:03:01.829
多个视频轨道和多个音频

00:02:58.079 --> 00:03:05.579
在这种情况下，我们期望

00:03:01.829 --> 00:03:05.930
只是视频，我会说为什么

00:03:05.579 --> 00:03:09.540
时刻

00:03:05.930 --> 00:03:12.090
我们应该只有一个，所以我们有一个

00:03:09.540 --> 00:03:14.609
流，我们有一个轨道和轨道

00:03:12.090 --> 00:03:17.090
是每个影片的第一部影片

00:03:14.609 --> 00:03:20.930
这些流和轨道有

00:03:17.090 --> 00:03:25.310
所谓的约束设置和

00:03:20.930 --> 00:03:29.220
流同时具有的功能

00:03:25.310 --> 00:03:34.220
浏览器的约束和功能

00:03:29.220 --> 00:03:37.560
有能力，有轨道

00:03:34.220 --> 00:03:39.509
功能限制和设置

00:03:37.560 --> 00:03:41.459
然后当我们想要实际

00:03:39.509 --> 00:03:43.979
照片，如果我们使用图像捕获

00:03:41.459 --> 00:03:46.470
 API，但再次进行其他设置

00:03:43.979 --> 00:03:47.939
对象，所以我很抱歉，如果你得到

00:03:46.470 --> 00:03:49.439
与约束相混淆

00:03:47.939 --> 00:03:52.129
功能和设置有

00:03:49.439 --> 00:03:55.530
有几件事叫做

00:03:52.129 --> 00:03:56.879
这就是API的方式

00:03:55.530 --> 00:03:59.400
我们将要使用的第一名

00:03:56.879 --> 00:04:03.169
是在我们实际的getusermedia核心中

00:03:59.400 --> 00:04:06.239
我们为流传递约束

00:04:03.169 --> 00:04:09.930
这是我们告诉的方式

00:04:06.239 --> 00:04:11.189
浏览器我们想要什么样的相机

00:04:09.930 --> 00:04:12.719
我们的大多数约束都定义为

00:04:11.189 --> 00:04:15.150
在文件顶部的常量

00:04:12.719 --> 00:04:17.070
可以看到他们说我们想要

00:04:15.150 --> 00:04:19.289
视频，这就是为什么我们不会得到的原因

00:04:17.070 --> 00:04:21.449
任何音频，因为audio属性是

00:04:19.289 --> 00:04:22.919
默认情况下为false，所以我们只说

00:04:21.449 --> 00:04:24.659
一个视频，我们没有设置设备

00:04:22.919 --> 00:04:26.820
此处的ID，但我们在函数中进行了设置

00:04:24.659 --> 00:04:28.040
一会儿我会分享，我们说我们

00:04:26.820 --> 00:04:29.720
想要面对模式

00:04:28.040 --> 00:04:31.970
成为相机的用户之一

00:04:29.720 --> 00:04:33.980
面对用户，它是自拍相机或

00:04:31.970 --> 00:04:36.470
它所面对的环境

00:04:33.980 --> 00:04:38.830
用户进入您正在查看的内容， 

00:04:36.470 --> 00:04:44.000
我们说宽度和高度应该

00:04:38.830 --> 00:04:47.000
理想情况是1080p高清分辨率

00:04:44.000 --> 00:04:50.210
现在有了这些限制，我本来可以

00:04:47.000 --> 00:04:51.860
说面对模式只是用户

00:04:50.210 --> 00:04:53.930
我可以说我只想要自拍

00:04:51.860 --> 00:04:55.430
模式，否则我可能会说我想要

00:04:53.930 --> 00:04:58.940
高度宽度和高度为

00:04:55.430 --> 00:05:04.040
精确的1080p分辨率，但如果这些

00:04:58.940 --> 00:05:06.320
约束不能满足，那么你

00:05:04.040 --> 00:05:10.160
不会得到任何信息你不会得到任何信息流

00:05:06.320 --> 00:05:14.300
完全是这样，如果我在这里准确地运行

00:05:10.160 --> 00:05:16.910
或只有我的笔记本电脑上的用户

00:05:14.300 --> 00:05:21.290
在这里这实际上会失败，因为我的

00:05:16.910 --> 00:05:24.440
笔记本电脑只会给我720p分辨率

00:05:21.290 --> 00:05:26.180
镜头之外，它仅支持

00:05:24.440 --> 00:05:28.100
我指的是环境相机

00:05:26.180 --> 00:05:30.230
它面对用户，但它描述了它

00:05:28.100 --> 00:05:33.140
作为环境相机，因此我们正在使用

00:05:30.230 --> 00:05:35.660
无论从哪个设备ID传入

00:05:33.140 --> 00:05:38.480
 UI层更改约束

00:05:35.660 --> 00:05:40.250
视频，以便当我们所有人

00:05:38.480 --> 00:05:43.040
用户媒体，我们正在变得特别

00:05:40.250 --> 00:05:46.850
相机，所以这是最初的限制

00:05:43.040 --> 00:05:49.940
对于getusermedia，我们也有各种

00:05:46.850 --> 00:05:51.890
设置一次就可以放到视频流中

00:05:49.940 --> 00:05:54.470
这样一来，一旦我们的视频流开始

00:05:51.890 --> 00:05:56.990
我们提取了

00:05:54.470 --> 00:05:59.600
该流，我们将其存储起来，我们可以

00:05:56.990 --> 00:06:01.820
现在在选项上设置第二个优势

00:05:59.600 --> 00:06:03.020
跟踪我们何时要在

00:06:01.820 --> 00:06:04.730
跟踪我们需要确保它是

00:06:03.020 --> 00:06:07.370
实际支持，所以有两个

00:06:04.730 --> 00:06:09.470
我们需要看的一件事是

00:06:07.370 --> 00:06:12.350
在文件的顶部，我们有这个

00:06:09.470 --> 00:06:15.170
支持的约束对象

00:06:12.350 --> 00:06:17.750
导航器点媒体设备设置

00:06:15.170 --> 00:06:20.390
得到支持的约束，假设

00:06:17.750 --> 00:06:22.580
我们支持的媒体设备API 

00:06:20.390 --> 00:06:23.990
这将告诉我们哪些限制

00:06:22.580 --> 00:06:25.430
浏览器支持

00:06:23.990 --> 00:06:27.350
这些是浏览器

00:06:25.430 --> 00:06:31.910
知道像白色的东西

00:06:27.350 --> 00:06:34.370
平衡曝光亮度变焦对焦

00:06:31.910 --> 00:06:37.310
距离这些东西是

00:06:34.370 --> 00:06:40.040
我们可以设置以更改

00:06:37.310 --> 00:06:41.630
相机在物理上运作，你知道

00:06:40.040 --> 00:06:43.780
什么样的

00:06:41.630 --> 00:06:47.510
我们从相机回来

00:06:43.780 --> 00:06:49.460
这是实时的，正在影响

00:06:47.510 --> 00:06:52.580
来自

00:06:49.460 --> 00:06:55.580
相机，所以我们现在知道哪些约束

00:06:52.580 --> 00:06:57.500
浏览器支持，我们还需要

00:06:55.580 --> 00:06:59.660
考虑到哪些限制

00:06:57.500 --> 00:07:01.160
跟踪我们目前有哪些支持

00:06:59.660 --> 00:07:03.800
因为对于

00:07:01.160 --> 00:07:06.500
我手机上的例子

00:07:03.800 --> 00:07:08.390
相机没有闪光灯

00:07:06.500 --> 00:07:10.520
支持变焦或类似的东西

00:07:08.390 --> 00:07:13.610
而环境相机确实有

00:07:10.520 --> 00:07:15.620
一闪，所以我们可以在那将有

00:07:13.610 --> 00:07:17.960
一组不同的约束，所以

00:07:15.620 --> 00:07:20.270
我们拥有的不同功能

00:07:17.960 --> 00:07:22.820
可以将约束应用于

00:07:20.270 --> 00:07:23.750
获得以下功能

00:07:22.820 --> 00:07:26.120
轨道

00:07:23.750 --> 00:07:28.160
这是另一个API调用

00:07:26.120 --> 00:07:29.570
目前正在处理该曲目，因为

00:07:28.160 --> 00:07:31.850
我们可能实际上还没有开始

00:07:29.570 --> 00:07:34.310
流，并且该音轨是否支持

00:07:31.850 --> 00:07:35.630
获取功能方法，因为这是

00:07:34.310 --> 00:07:37.670
比较新的方法，所以这是一个

00:07:35.630 --> 00:07:38.930
特征检测是否同时运动

00:07:37.670 --> 00:07:40.550
这些东西，我们称之为那个功能

00:07:38.930 --> 00:07:42.980
它为我们提供了功能列表

00:07:40.550 --> 00:07:46.220
对于赛道，这是同一种

00:07:42.980 --> 00:07:49.190
对象作为支持的功能

00:07:46.220 --> 00:07:51.020
现在只有浏览器，我们知道

00:07:49.190 --> 00:07:53.330
特别是这首曲目

00:07:51.020 --> 00:07:55.670
支持他们，所以当我们想改变时

00:07:53.330 --> 00:07:58.040
我们需要对此视频提要进行限制

00:07:55.670 --> 00:08:00.110
检查这是一个支持约束

00:07:58.040 --> 00:08:02.390
所以我们检查我们的支持限制

00:08:00.110 --> 00:08:03.920
它存在，那是真的，然后我们

00:08:02.390 --> 00:08:06.950
获得当前的功能

00:08:03.920 --> 00:08:08.840
跟踪，如果这也是事实，那么我们将

00:08:06.950 --> 00:08:11.210
记下我们将设置在

00:08:08.840 --> 00:08:12.890
跟踪约束对象

00:08:11.210 --> 00:08:15.710
记录我们想要的约束

00:08:12.890 --> 00:08:17.480
此特定值设置为此

00:08:15.710 --> 00:08:19.010
名称，然后我们将应用所有

00:08:17.480 --> 00:08:21.290
我们到那里的约束

00:08:19.010 --> 00:08:24.890
约束对象只是一点点

00:08:21.290 --> 00:08:27.770
奇怪而不是成为对象

00:08:24.890 --> 00:08:29.720
键是一个具有单个键的对象

00:08:27.770 --> 00:08:31.610
这被称为高级，这是一个

00:08:29.720 --> 00:08:34.700
数组和里面放了更多

00:08:31.610 --> 00:08:35.990
对象，因为您不能直接

00:08:34.700 --> 00:08:38.900
地图的东西，因为你可能有

00:08:35.990 --> 00:08:41.690
相同的多个条目

00:08:38.900 --> 00:08:44.930
约束，我只需要

00:08:41.690 --> 00:08:47.540
在这里建立这个数组，然后我们

00:08:44.930 --> 00:08:50.120
实际上将这些约束应用于

00:08:47.540 --> 00:08:52.339
使用更新的浏览器进行跟踪

00:08:50.120 --> 00:08:55.040
实际使用称为图片的API 

00:08:52.339 --> 00:08:58.730
捕获API和这个

00:08:55.040 --> 00:09:01.970
让我们直接控制

00:08:58.730 --> 00:09:04.070
拍照，但我们仍然需要

00:09:01.970 --> 00:09:06.019
支持不支持的旧版浏览器

00:09:04.070 --> 00:09:08.540
支持这一点，所以有一个后备方式

00:09:06.019 --> 00:09:10.100
这涉及使用画布，所以如果我们

00:09:08.540 --> 00:09:11.509
支持图像捕获，我们做一件事

00:09:10.100 --> 00:09:14.870
但让我们快速看看

00:09:11.509 --> 00:09:18.410
后备案例，因此我们创建了一个

00:09:14.870 --> 00:09:20.660
画布，我们将其宽度设置为相同

00:09:18.410 --> 00:09:24.350
作为我们获得的视频，然后

00:09:20.660 --> 00:09:26.029
我们将视频绘制到画布上

00:09:24.350 --> 00:09:29.480
只会画出当前帧

00:09:26.029 --> 00:09:31.279
进入画布，然后您可以使用

00:09:29.480 --> 00:09:34.339
我上次谈到的助手

00:09:31.279 --> 00:09:36.410
把那块画布变成一个斑点

00:09:34.339 --> 00:09:38.540
然后可以存储或操纵任何东西

00:09:36.410 --> 00:09:41.240
否则我们想做一个问题

00:09:38.540 --> 00:09:44.959
这就是getusermedia本身

00:09:41.240 --> 00:09:48.319
对于视频流仅支持up 

00:09:44.959 --> 00:09:50.839
到高清分辨率，如果

00:09:48.319 --> 00:09:53.240
拥有一部现代手机您的手机是

00:09:50.839 --> 00:09:56.630
可能比4k分辨率好得多

00:09:53.240 --> 00:09:58.310
实际拍摄照片的时间是

00:09:56.630 --> 00:10:01.519
为什么我们要使用图像捕获API 

00:09:58.310 --> 00:10:04.760
因此，如果支持图像捕获API 

00:10:01.519 --> 00:10:06.620
然后我们走那条小溪，我们要去

00:10:04.760 --> 00:10:08.149
摆脱它的轨道，我们要去

00:10:06.620 --> 00:10:10.519
为此创建图像捕获对象

00:10:08.149 --> 00:10:12.199
那个轨道，然后简单的事情

00:10:10.519 --> 00:10:14.750
我们可以做的就是可以说被俘

00:10:12.199 --> 00:10:17.839
拍摄将作为照片返回的照片

00:10:14.750 --> 00:10:19.579
从相机和这个

00:10:17.839 --> 00:10:21.170
因为我们专门告诉它

00:10:19.579 --> 00:10:24.260
拍张照片，我们会使用完整的分辨率

00:10:21.170 --> 00:10:27.050
相机拍摄照片

00:10:24.260 --> 00:10:32.360
已经是一个巨大的进步，但是如果

00:10:27.050 --> 00:10:35.690
我们有一个现代的浏览器，它使我们

00:10:32.360 --> 00:10:38.060
为了获得相机的功能，我们

00:10:35.690 --> 00:10:39.709
还可以设置一些附加功能

00:10:38.060 --> 00:10:42.260
在这里，您看到我正在检查这张照片

00:10:39.709 --> 00:10:46.130
功能对象，我跳过了

00:10:42.260 --> 00:10:48.050
它最初但在开始流中，如果

00:10:46.130 --> 00:10:50.089
支持图像捕获

00:10:48.050 --> 00:10:52.610
照片功能对象是

00:10:50.089 --> 00:10:56.000
返回获取照片功能的结果

00:10:52.610 --> 00:10:58.579
在轨道的图像捕获API上

00:10:56.000 --> 00:11:00.290
现在这些照片功能

00:10:58.579 --> 00:11:02.630
较小的清单

00:11:00.290 --> 00:11:04.970
这就是所谓的补光灯

00:11:02.630 --> 00:11:07.579
模式是减轻红眼，然后

00:11:04.970 --> 00:11:08.570
我的应用程式中的图片高度和图片宽度

00:11:07.579 --> 00:11:10.010
其实并不想改变

00:11:08.570 --> 00:11:13.190
我想要的图像高度和图像宽度

00:11:10.010 --> 00:11:16.660
全分辨率，但其他两个是

00:11:13.190 --> 00:11:20.360
很有趣，所以如果这首单曲

00:11:16.660 --> 00:11:24.080
支持触发的补光模式

00:11:20.360 --> 00:11:25.960
闪光灯，因此补光灯的选项

00:11:24.080 --> 00:11:28.550
实际拍摄照片时的模式

00:11:25.960 --> 00:11:32.360
假设支持

00:11:28.550 --> 00:11:34.340
自动关闭或开启等，表示始终会着火

00:11:32.360 --> 00:11:35.990
闪光灯自动含义取决于

00:11:34.340 --> 00:11:39.230
在光线水平上，无论相机如何

00:11:35.990 --> 00:11:41.090
通常对红眼也有类似的作用

00:11:39.230 --> 00:11:42.860
减少，所以我们这样做的方法是

00:11:41.090 --> 00:11:45.500
摄入照片（如果我们有这张照片） 

00:11:42.860 --> 00:11:47.990
功能对象和补光灯

00:11:45.500 --> 00:11:50.660
模式包括我们要尝试的所有内容

00:11:47.990 --> 00:11:53.420
设置闪光灯，然后进行设置

00:11:50.660 --> 00:11:55.910
灯光模式就是这样

00:11:53.420 --> 00:11:58.340
如果照片具有红眼功能

00:11:55.910 --> 00:11:59.840
减少是可控的，那么我们将

00:11:58.340 --> 00:12:02.750
允许我们减轻红眼

00:11:59.840 --> 00:12:04.460
设置在那里和红眼

00:12:02.750 --> 00:12:05.930
减少和闪烁只是公开的

00:12:04.460 --> 00:12:07.280
相机助手上的属性

00:12:05.930 --> 00:12:09.110
尽管可以从UX层进行设置

00:12:07.280 --> 00:12:12.050
只要这样我们就可以通过

00:12:09.110 --> 00:12:13.490
设置对象进行拍照及其

00:12:12.050 --> 00:12:16.490
如果我们逮捕它会发射闪光灯

00:12:13.490 --> 00:12:18.770
使用减轻红眼功能

00:12:16.490 --> 00:12:21.290
不管那是什么设置

00:12:18.770 --> 00:12:24.880
流的功能和约束

00:12:21.290 --> 00:12:27.890
跟踪，他们正在拍照

00:12:24.880 --> 00:12:28.790
希望现在一切都清楚了

00:12:27.890 --> 00:12:30.320
我们去

00:12:28.790 --> 00:12:32.510
正确使用以下功能

00:12:30.320 --> 00:12:36.260
相机非常感谢您的观看

00:12:32.510 --> 00:12:37.550
直到下一次开心的编码谢谢

00:12:36.260 --> 00:12:40.070
观看是否喜欢看更多

00:12:37.550 --> 00:12:42.670
我们的视频请点击这里再见

00:12:40.070 --> 00:12:42.670
干杯

