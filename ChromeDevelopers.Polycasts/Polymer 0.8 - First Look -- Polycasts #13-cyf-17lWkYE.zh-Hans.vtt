WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:01.990
[播放音乐]

00:00:01.990 --> 00:00:03.073
罗布·多德森：大家好

00:00:03.073 --> 00:00:03.572
最近如何？

00:00:03.572 --> 00:00:04.350
我是罗布·多德森

00:00:04.350 --> 00:00:06.580
今天是Polycasts系列教程中
特殊的一课

00:00:06.580 --> 00:00:09.250
因为Polymer0.8终于上线了

00:00:09.250 --> 00:00:11.110
所以我将向你展示如何创建

00:00:11.110 --> 00:00:12.580
自己的元素

00:00:12.580 --> 00:00:14.432
好的我们开始吧

00:00:14.432 --> 00:00:16.140
这就是我今天要创建的

00:00:16.140 --> 00:00:18.041
一个非常简洁的提示横幅

00:00:18.041 --> 00:00:19.540
当用户完成了某个动作

00:00:19.540 --> 00:00:22.050
或者接收到了某种通知后

00:00:22.050 --> 00:00:23.760
就会弹出这个提示

00:00:23.760 --> 00:00:26.440
为了创建一个元素
你需要三样东西

00:00:26.440 --> 00:00:28.110
您需Web组件polyfills

00:00:28.110 --> 00:00:30.250
它能保证你的元素

00:00:30.250 --> 00:00:31.900
能在不同浏览器中显示

00:00:31.900 --> 00:00:33.740
你还需要Polymer本身

00:00:33.740 --> 00:00:36.800
最后
你需要一个单独的HTML文件来保存

00:00:36.800 --> 00:00:38.420
你的元素定义

00:00:38.420 --> 00:00:41.550
在Polymer0.8中
注册一个标签是很容易的

00:00:41.550 --> 00:00:43.330
首先调用Polymer构造器

00:00:43.330 --> 00:00:45.980
传入一个包含is属性的对象

00:00:45.980 --> 00:00:47.530
然后给它一个标签名就可以了

00:00:47.530 --> 00:00:51.850
重要的是 你的标签名中
必须包含破折号

00:00:51.850 --> 00:00:54.170
这样做是为了告诉浏览器

00:00:54.170 --> 00:00:55.860
嘿
我正在创建一个自定义元素

00:00:55.860 --> 00:00:58.510
你得特殊对待它

00:00:58.510 --> 00:01:01.300
当这一切就位
当当！

00:01:01.300 --> 00:01:04.349
你成功创建了
属于你自己的HTML标签

00:01:04.349 --> 00:01:06.770
现在 你可以开始使用
这个新的标签了

00:01:06.770 --> 00:01:09.570
但它现在比较无聊
因为它实际上

00:01:09.570 --> 00:01:12.170
并不能显示任何东西
所以我们来做些修改

00:01:12.170 --> 00:01:13.860
为了渲染元素中的内容

00:01:13.860 --> 00:01:16.340
你需要引入一个
包含template的

00:01:16.340 --> 00:01:18.410
DOM模块标签

00:01:18.410 --> 00:01:20.920
你可能会觉得它和
旧版的Polymer元素很像

00:01:20.920 --> 00:01:22.660
如果你使用过以前的版本

00:01:22.660 --> 00:01:26.170
这里重要的一点是
确保给你的DOM设置的ID

00:01:26.170 --> 00:01:28.370
和你的标签名称相匹配

00:01:28.370 --> 00:01:31.250
它能帮助Polymer定位你的内容

00:01:31.250 --> 00:01:32.160
从而知道它要渲染什么

00:01:32.160 --> 00:01:35.610
我可以在template里面
包含任何我想要的元素

00:01:35.610 --> 00:01:39.030
比如我可以添加一个
包含提示信息的div元素

00:01:39.030 --> 00:01:41.430
但我想要做的
比这个要高一个档次

00:01:41.430 --> 00:01:44.970
我想让我的alert
能接受用户传入的消息

00:01:44.970 --> 00:01:47.200
因此 我将不硬编码一些文字

00:01:47.200 --> 00:01:50.460
而是添加另一个
叫做content的元素标签

00:01:50.460 --> 00:01:53.700
我在以前的视频教程里
谈到过content标签

00:01:53.700 --> 00:01:55.410
如果你想了解更多

00:01:55.410 --> 00:01:57.500
你可以在下面这里
找到这个视频

00:01:57.500 --> 00:02:00.170
总之 他们能把
精简版DOM里的content元素

00:02:00.170 --> 00:02:03.235
映射到我的元素里
并通过我的元素进行渲染

00:02:03.235 --> 00:02:05.110
好的 关于这一点我
已经说的够多了

00:02:05.110 --> 00:02:07.693
我敢肯定你已经跃跃欲试了
让我们跳转到代码编辑器

00:02:07.693 --> 00:02:09.440
开始写点代码吧

00:02:09.440 --> 00:02:12.390
在我的bower.json文件里
添加了两个依赖

00:02:12.390 --> 00:02:15.692
一个是webcomponentsjs
指向0.6版本

00:02:15.692 --> 00:02:17.400
另一个是Polymer

00:02:17.400 --> 00:02:19.439
当前指向的是0.8-preview版本

00:02:19.439 --> 00:02:21.480
这是因为在我录制视频的时候

00:02:21.480 --> 00:02:23.400
0.8版本没有发布呢

00:02:23.400 --> 00:02:25.040
但是如果你查看Polymer网站

00:02:25.040 --> 00:02:27.270
发现0.8版本已经发布

00:02:27.270 --> 00:02:29.630
那么你完全可以更进一步

00:02:29.630 --> 00:02:31.810
把它修改成0.8版本的标签

00:02:31.810 --> 00:02:33.710
接着跳转到终端

00:02:33.710 --> 00:02:35.320
运行bower install

00:02:35.320 --> 00:02:37.479
这会自动下载所有依赖库

00:02:37.479 --> 00:02:39.270
现在一切准备就绪

00:02:39.270 --> 00:02:41.820
在我的index.html文件中

00:02:41.820 --> 00:02:45.609
首先引入webcomponents.js的
polyfills

00:02:45.609 --> 00:02:48.150
你会发现我在此使用
webcomponents-lite.js

00:02:51.050 --> 00:02:55.580
webcomponents-lite.js
等于所有Web组件的polyfills

00:02:55.580 --> 00:02:57.700
减去Shadow DOM的polyfill

00:02:57.700 --> 00:03:00.610
我这样做的原因是
Polymer 0.8中自带了

00:03:00.610 --> 00:03:04.620
性能更好的Shadow DOM的变体

00:03:04.620 --> 00:03:08.540
叫做Shady DOM

00:03:08.540 --> 00:03:11.030
我会在未来的视频中
详细讲解Shady DOM

00:03:11.030 --> 00:03:13.530
但现在 如果你只是想跟着教程
了解个大概的话

00:03:13.530 --> 00:03:15.570
引入webcomponents-lite.js即可

00:03:15.570 --> 00:03:17.350
这不会对你有什么影响

00:03:17.350 --> 00:03:20.140
接着我要创建一个
名为quick-alert.html的HTML文件

00:03:20.140 --> 00:03:23.080
我将在这里对我的元素进行定义

00:03:23.080 --> 00:03:25.900
首先我需要引入Polymer

00:03:25.900 --> 00:03:28.250
确保在我注册自己的标签前

00:03:28.250 --> 00:03:29.980
已经加载了Polymer

00:03:29.980 --> 00:03:31.730
然后
我要添加一个DOM模块元素

00:03:31.730 --> 00:03:33.370
以及一个template元素

00:03:33.370 --> 00:03:35.980
最后 我得给我的DOM模块设置个ID

00:03:35.980 --> 00:03:37.710
它应该和元素名称相对应

00:03:37.710 --> 00:03:40.610
在template里
我可以创建任何类型的内容

00:03:40.610 --> 00:03:44.810
这里我需要添加一个提示信息

00:03:44.810 --> 00:03:48.100
并添加一些CSS样式

00:03:48.100 --> 00:03:51.980
你可能没见过这个host选择器

00:03:51.980 --> 00:03:53.160
这对你来说可能比较新鲜

00:03:53.160 --> 00:03:54.909
host选择器实际上是

00:03:54.909 --> 00:03:58.860
Shadow DOM的CSS补充的

00:03:58.860 --> 00:04:02.230
它允许一个元素引用自身

00:04:02.230 --> 00:04:04.040
在此它让quick-alert标签

00:04:04.040 --> 00:04:07.622
告诉浏览器 嘿
这里是我期待的渲染方式

00:04:07.622 --> 00:04:10.080
在style标签块里
如果你愿意

00:04:10.080 --> 00:04:10.910
你还可以包含其他东西

00:04:10.910 --> 00:04:13.660
这里我添加了一个alert类

00:04:13.660 --> 00:04:14.550
它指向这里的div

00:04:14.550 --> 00:04:16.040
这样也可以

00:04:16.040 --> 00:04:18.700
最后一件事是引入script标签

00:04:18.700 --> 00:04:20.579
调用Polymer构造器

00:04:20.579 --> 00:04:22.490
并传入我的标签名

00:04:22.490 --> 00:04:24.423
回到我的index.html

00:04:24.423 --> 00:04:27.080
我需要导入我的
quick-alert元素的定义

00:04:27.080 --> 00:04:30.100
然后我就可以在我的页面上
使用这个标签了

00:04:30.100 --> 00:04:32.930
切换到Chrome
你可以看到

00:04:32.930 --> 00:04:35.350
新标签的渲染
正如我们所预期的一样

00:04:35.350 --> 00:04:37.910
我们要做的最后一件事是
传入一个content元素

00:04:37.910 --> 00:04:40.740
这样用户就可以切换
任何他们想要的消息

00:04:40.740 --> 00:04:42.420
回到我的元素定义

00:04:42.420 --> 00:04:46.340
我要用content元素

00:04:46.340 --> 00:04:47.670
来代替这里的硬编码文本

00:04:47.670 --> 00:04:50.650
现在在我的index文件中
我可以传递任何消息

00:04:50.650 --> 00:04:53.160
给我的quick-alert标签

00:04:53.160 --> 00:04:56.400
当我切换回Chrome浏览器
查看效果的时候

00:04:56.400 --> 00:04:58.950
渲染的内容就是这些消息

00:04:58.950 --> 00:05:00.970
至此全部完成了
Polymer 0.8里的

00:05:00.970 --> 00:05:02.654
你的第一个自定义元素

00:05:02.654 --> 00:05:04.570
到这里为止

00:05:04.570 --> 00:05:06.040
我们只是看了看新版本的皮毛

00:05:06.040 --> 00:05:07.623
在接下来的几个视频里

00:05:07.623 --> 00:05:09.850
我会把重点放在
介绍0.8版本的新特性上

00:05:09.850 --> 00:05:12.100
如果你想要在第一时间
看到那些视频

00:05:12.100 --> 00:05:13.430
记得订阅我们的节目

00:05:13.430 --> 00:05:16.660
除此之外

00:05:16.660 --> 00:05:19.010
如果你想要分享你正在做的
或者你想把你的成果

00:05:19.010 --> 00:05:21.302
放到真实的网络环境里
记得加入我们的G+社区

00:05:21.302 --> 00:05:23.051
与往常一样
感谢你的观看

00:05:23.051 --> 00:05:24.290
我们下次再见

00:05:27.260 --> 00:05:29.120
[叮当作响的声音]

00:05:29.120 --> 00:05:31.674
摄影：就这样 罗布

00:05:31.674 --> 00:05:33.590
罗布·多德森：我以为你说“骨头沉默”

00:05:33.590 --> 00:05:35.950
然后我觉得这是一个
非常酷的乐队的名字

00:05:35.950 --> 00:05:37.450
[笑声]

00:05:37.450 --> 00:05:40.500
[播放音乐]

