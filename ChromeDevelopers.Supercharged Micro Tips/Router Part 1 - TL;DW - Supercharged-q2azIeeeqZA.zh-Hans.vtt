WEBVTT
Kind: captions
Language: zh-Hans

00:00:00.000 --> 00:00:02.445
 [音乐] 

00:00:10.040 --> 00:00:12.760
欢迎来到今天的Supercharged TL; DW集

00:00:12.760 --> 00:00:16.470
我是Paul，上周我和Surma建立了一个路由器。 

00:00:16.470 --> 00:00:17.720
让我告诉你我们做了什么。 

00:00:17.720 --> 00:00:19.303
您会认识到这种事情

00:00:19.303 --> 00:00:20.903
在可扩展的应用程序中， 

00:00:20.903 --> 00:00:22.340
或实际上任何Web应用程序， 

00:00:22.340 --> 00:00:25.412
在有页面的地方，您可以单击表面， 

00:00:25.412 --> 00:00:27.650
该部门将动态变化， 

00:00:27.650 --> 00:00:30.820
它更新地址栏中的源。 

00:00:30.820 --> 00:00:34.290
您可以按向前和向后移动等。 

00:00:34.290 --> 00:00:35.790
好的，让我们看一下代码。 

00:00:35.790 --> 00:00:37.790
但是，不要等，然后再做

00:00:37.790 --> 00:00:41.910
我们需要在“理论角”中进行对话

00:00:43.270 --> 00:00:46.680
欢迎来到理论角度，角度理论， 

00:00:46.680 --> 00:00:49.690
思考理论的最佳场所之一。 

00:00:49.730 --> 00:00:51.570
我们有我们的路由器。 

00:00:51.570 --> 00:00:53.819
实际上，设备必须具有两种模式。 

00:00:53.819 --> 00:00:56.390
很多人在第一次制造路由器时， 

00:00:56.390 --> 00:00:58.200
他们没有意识到他们两者都需要。 

00:00:58.200 --> 00:01:02.160
您拥有主动模式，可以在其中直接对路由器说

00:01:02.160 --> 00:01:04.269
您要转到此URL。 

00:01:04.269 --> 00:01:06.280
但是，您还需要间接模式。 

00:01:06.280 --> 00:01:09.655
 URL更改时，必须通知路由器。 

00:01:09.655 --> 00:01:11.610
这是他的间接情况， 

00:01:11.610 --> 00:01:13.830
在哪里收听popstate事件更改

00:01:13.830 --> 00:01:15.555
无论哪种方式，我们都会处理

00:01:15.555 --> 00:01:16.840
显示区域会发生什么。 

00:01:16.840 --> 00:01:19.490
因此，路由器应该在您的世界中间。 

00:01:19.490 --> 00:01:21.530
好吧，当然，当您直接付款时， 

00:01:21.530 --> 00:01:23.370
您还应该执行pushState， 

00:01:23.370 --> 00:01:25.950
并自行更改URL。 

00:01:26.080 --> 00:01:28.650
好吧，我们已经做好了这方面的一切。 

00:01:28.650 --> 00:01:30.420
正如我所说，我们要做的是

00:01:30.420 --> 00:01:32.310
网站路径名称，例如， 

00:01:32.310 --> 00:01:34.810
然后，我们决定应该显示哪个显示区域， 

00:01:34.810 --> 00:01:35.960
谁应该消失。 

00:01:35.960 --> 00:01:38.610
如果显示区域相同，则应该对其进行更新。 

00:01:38.610 --> 00:01:41.220
我们将在路由器中决定所有这一切。 

00:01:41.220 --> 00:01:43.020
欢迎回到现实。 

00:01:43.020 --> 00:01:44.550
我在这里爱他。太好了

00:01:44.550 --> 00:01:46.930
实际上有代码。 

00:01:46.930 --> 00:01:49.900
很好，让我们看一些代码。 

00:01:49.900 --> 00:01:52.050
首先，让我们看一下HTML。 

00:01:52.050 --> 00:01:54.100
现在，我们首先要注意的是

00:01:54.100 --> 00:01:56.370
我们有几个自定义元素。 

00:01:56.370 --> 00:01:58.224
您不必使用自定义项目。 

00:01:58.224 --> 00:02:00.140
我们只是借此机会尝试了一下。 

00:02:00.140 --> 00:02:02.820
这里我们有sc-view，这是一个显示区域

00:02:02.820 --> 00:02:04.140
我们要更改它们。 

00:02:04.140 --> 00:02:07.857
我们在这里注意到的是，这里有一个route属性。 

00:02:07.857 --> 00:02:09.440
我们将使用路线功能

00:02:09.440 --> 00:02:12.700
确定哪个显示区域将出现，消失或类似的显示。 

00:02:13.830 --> 00:02:16.440
下面，我们还有这个sc-router， 

00:02:16.440 --> 00:02:19.160
然后，您将看到需要控制的JavaScript。 

00:02:21.940 --> 00:02:25.070
让我们看一下sc-router本身。 

00:02:25.400 --> 00:02:27.551
它扩展了HTMLElement 

00:02:27.551 --> 00:02:29.120
因为它将是一个自定义项目。 

00:02:29.120 --> 00:02:31.629
您可以在下面看到我们称为registerElement 

00:02:31.629 --> 00:02:33.920
在这里，告诉他我们想要什么。 

00:02:33.920 --> 00:02:34.670
好吧，这很好。 

00:02:34.670 --> 00:02:36.770
这意味着我们将获得createdCallbacks， 

00:02:36.770 --> 00:02:39.520
 attachCallbacks，detachedCallbacks， 

00:02:39.520 --> 00:02:40.685
还有这些东西。 

00:02:40.685 --> 00:02:43.820
非常有用，因为它允许我们拥有生命周期。 

00:02:44.250 --> 00:02:47.000
最重要的是在这个attachedCallback中， 

00:02:47.000 --> 00:02:50.310
我们在popstate上调用addEventListener。 

00:02:50.310 --> 00:02:52.690
我们说我们有这个onChanged函数。 

00:02:52.690 --> 00:02:55.080
您会发现它在此onChanged函数中

00:02:55.080 --> 00:02:58.480
所有有趣的事情都会发生的地方。 

00:02:58.480 --> 00:03:01.250
与detachedCallback相同，我们现在将其删除。 

00:03:01.250 --> 00:03:03.960
当您创建它时，我们实际上会准备该响应

00:03:03.960 --> 00:03:06.380
 onChanged，并且实际上匹配一组路由

00:03:06.390 --> 00:03:09.870
在哪里为他们创建地图。这发生在addRoutes中， 

00:03:09.870 --> 00:03:12.770
如您所见，我们正在请求所有sc视图， 

00:03:12.770 --> 00:03:14.490
他们一步步走过。 

00:03:14.490 --> 00:03:16.910
我们添加了自己的路线，其中包括

00:03:16.910 --> 00:03:19.740
创建路线显示空间的正则表达式

00:03:19.740 --> 00:03:22.870
并将其设置在显示区域中，以便我们稍后再说， 

00:03:22.870 --> 00:03:24.545
你知道，我们有哪条路线？ 

00:03:24.545 --> 00:03:28.040
这是我们需要显示或隐藏的显示区域。 

00:03:28.040 --> 00:03:30.247
这实际上是就职典礼的全部工作。 

00:03:30.247 --> 00:03:32.890
我们应该做的是快速查看“执行”功能

00:03:32.890 --> 00:03:35.163
我在前面的理论理论中提到过。 

00:03:35.163 --> 00:03:36.920
这表示活动模式。 

00:03:36.920 --> 00:03:38.620
我们有window.history.pushState， 

00:03:38.620 --> 00:03:40.290
因此，我们将推送新的URL。 

00:03:40.290 --> 00:03:41.927
同样，我们将其称为onChanged。 

00:03:41.927 --> 00:03:44.498
好吧，我想我们已经准备好看一下onChanged， 

00:03:44.498 --> 00:03:46.260
因此，让我们到达那里。 

00:03:48.980 --> 00:03:52.160
所以这是onChanged自己，我们要做的第一件事是

00:03:52.160 --> 00:03:54.020
我们将询问当前路径名称， 

00:03:54.020 --> 00:03:56.330
然后我们将浏览所有的路线

00:03:56.330 --> 00:03:58.010
我们尝试找到一个匹配项。 

00:03:58.010 --> 00:04:00.990
如果我们什么都没找到，我们将离开。不用担心

00:04:01.180 --> 00:04:03.790
如果找到一个，这里就是有趣的地方， 

00:04:03.790 --> 00:04:06.289
因为可能发生三件事。 

00:04:06.289 --> 00:04:09.650
如果没有显示区域，则需要显示它。 

00:04:09.650 --> 00:04:11.506
如果有一个，我们需要

00:04:11.506 --> 00:04:13.380
我们决定只更新空间， 

00:04:13.380 --> 00:04:15.129
还是叫她搬出去

00:04:15.129 --> 00:04:17.489
让我们带来一个新的。 

00:04:18.079 --> 00:04:20.434
因此，让我们一一处理。 

00:04:20.434 --> 00:04:23.360
让我们处理一个已经存在currentView的情况

00:04:23.360 --> 00:04:25.200
屏幕上有东西， 

00:04:25.200 --> 00:04:28.400
它与新的currentView相同。 

00:04:28.400 --> 00:04:32.060
如果是这样，我们可以简单地用任何新信息进行更新

00:04:32.060 --> 00:04:33.880
我们可以从URL获得它。 

00:04:33.880 --> 00:04:37.107
如果不是，那么它实际上是currentView的替代方法。 

00:04:37.107 --> 00:04:39.220
因此，我们必须说这出来。 

00:04:39.220 --> 00:04:40.540
电流出来。 

00:04:40.540 --> 00:04:43.170
我们等待这个承诺，我会在稍后解释。 

00:04:44.510 --> 00:04:48.660
每当currentView保留时，如果不存在，则可能立即发生， 

00:04:49.250 --> 00:04:51.770
我们可以更新对currentView的引用， 

00:04:51.770 --> 00:04:54.650
我们可以告诉newView输入手机。 

00:04:54.650 --> 00:04:57.610
现在您可能已经注意到，这些进入和退出作业， 

00:04:57.610 --> 00:05:01.300
并进行更新-如果可以，我可以按两次- 

00:05:01.300 --> 00:05:02.650
输入，退出和更新， 

00:05:02.650 --> 00:05:05.490
您可能在想，他们在哪里准备？ 

00:05:05.490 --> 00:05:07.040
实际上，请记住这部分， 

00:05:07.040 --> 00:05:11.850
我们有sc-view元素和sc-view类，它们与sc-router状态相同。 

00:05:11.920 --> 00:05:13.770
这意味着它充满了电。 

00:05:13.770 --> 00:05:15.530
卡保，使用地址。 

00:05:15.530 --> 00:05:17.940
好吧，我们有sc-router和sc-view。 

00:05:17.940 --> 00:05:22.700
在sc视图中，这是Login，Exit和Update。 

00:05:22.700 --> 00:05:24.660
关于进入和退出的主要问题

00:05:24.660 --> 00:05:26.420
特别是，他们正在做的是

00:05:26.420 --> 00:05:28.170
只需在视图中添加一个类别。 

00:05:28.170 --> 00:05:30.270
显示屏将随后进入运动状态。 

00:05:30.270 --> 00:05:33.570
将会改变规模和透明度， 

00:05:33.570 --> 00:05:35.510
出现和消失有些褪色， 

00:05:35.510 --> 00:05:38.220
根据，他是来还是去。 

00:05:38.220 --> 00:05:40.740
动画结束后，我们运行transitionEnd， 

00:05:40.740 --> 00:05:42.860
这意味着我们可以兑现承诺。 

00:05:42.860 --> 00:05:45.690
这是我们进行一系列动作的简便方法， 

00:05:45.690 --> 00:05:48.130
因此，入口将不可避免地跟随出口。 

00:05:48.130 --> 00:05:49.520
但是你可以纠缠他们。 

00:05:49.520 --> 00:05:51.700
您只需决定何时要兑现承诺， 

00:05:51.700 --> 00:05:54.694
这将导致机芯运行。 

00:05:54.694 --> 00:05:55.420
就是这样

00:05:55.420 --> 00:05:57.480
这就是创建路由器的全部内容。 

00:05:57.480 --> 00:05:59.720
它涉及创建间接模式和直接模式， 

00:05:59.720 --> 00:06:01.920
它还与一系列承诺有关。 

00:06:01.920 --> 00:06:04.128
当然，您可以制造更高级的路由器， 

00:06:04.128 --> 00:06:06.770
通过允许人们以互斥的方式上传数据。 

00:06:06.770 --> 00:06:08.980
如果您希望我们在下一次直播中做到这一点， 

00:06:08.980 --> 00:06:10.535
请在下面留下评论。 

00:06:10.535 --> 00:06:11.410
我们见到她。 

00:06:11.410 --> 00:06:12.420
我们会回应。 

00:06:12.420 --> 00:06:14.020
非常感谢您的意见。 

00:06:14.020 --> 00:06:15.680
因此，不要忘记订阅。 

00:06:15.680 --> 00:06:17.410
 Surma和我将在几周后回来。 

00:06:17.410 --> 00:06:18.451
具有新的直播流。 

00:06:18.451 --> 00:06:20.750
我会在那里见你。 

00:06:20.750 --> 00:06:21.870
这是现场直播。 

00:06:21.870 --> 00:06:23.980
如果您有额外的一小时，则应收看。 

00:06:24.480 --> 00:06:26.875
下方还有一个订阅按钮， 

00:06:26.875 --> 00:06:27.750
两者都会起作用。 

00:06:27.750 --> 00:06:28.727
两者都很好。 

00:06:28.727 --> 00:06:29.940
顺便按一下。 

00:06:29.940 --> 00:06:31.580
好主意

