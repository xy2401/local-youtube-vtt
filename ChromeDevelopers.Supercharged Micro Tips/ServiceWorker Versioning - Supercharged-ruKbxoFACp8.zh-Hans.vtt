WEBVTT
Kind: captions
Language: zh-Hans

00:00:00.000 --> 00:00:02.310
 [爵士音乐播放] 

00:00:03.240 --> 00:00:04.890
 SURMA：开发ServiceWorker时， 

00:00:04.890 --> 00:00:07.710
通常将代码分成多个文件

00:00:07.710 --> 00:00:10.590
并使用导入脚本功能加载它们。 

00:00:10.590 --> 00:00:13.560
问题是导入文件之一中的更改

00:00:13.560 --> 00:00:15.180
可能无法联系ServiceWorker， 

00:00:15.180 --> 00:00:18.120
因为执行导入的文件实际上并没有

00:00:18.120 --> 00:00:19.170
更改。 

00:00:19.170 --> 00:00:21.930
一种简单的解决方法是放置您应用的版本

00:00:21.930 --> 00:00:24.450
编号进入主ServiceWorker文件

00:00:24.450 --> 00:00:27.240
并在每个版本上更新版本号。 

00:00:27.240 --> 00:00:30.270
让我们看一个使用范围作为示例的项目。 

00:00:30.270 --> 00:00:33.360
在构建任务中，我们修改了项目的补丁版本。 

00:00:33.360 --> 00:00:36.060
在gulp文件中，我们读取了package.json 

00:00:36.060 --> 00:00:37.980
并用它代替一个占位符

00:00:37.980 --> 00:00:40.800
在ServiceWorker文件中具有当前版本号。 

00:00:40.800 --> 00:00:43.680
这样，每个版本都会有一个唯一的ServiceWorker 

00:00:43.680 --> 00:00:45.450
在整个开发过程中。 

00:00:45.450 --> 00:00:48.630
另一个技巧是坚持语义版本控制。 

00:00:48.630 --> 00:00:51.360
 ServiceWorker可以检查版本号是否仅为

00:00:51.360 --> 00:00:54.300
补丁，次要修订或主要修订。 

00:00:54.300 --> 00:00:56.670
基于此，您可以为用户重新加载页面， 

00:00:56.670 --> 00:00:58.750
提示用户重新加载，或只是安装

00:00:58.750 --> 00:01:01.410
新的ServiceWorker在后台静默运行。 

00:01:01.410 --> 00:01:01.980
请享用。 

00:01:01.980 --> 00:01:03.450
下次见。 

00:01:03.450 --> 00:01:05.176
欢迎来到最后的购物车！ 

00:01:05.176 --> 00:01:07.050
如果您想进一步了解ServiceWorker， 

00:01:07.050 --> 00:01:08.430
您可以观看最后的直播

00:01:08.430 --> 00:01:10.030
我和杰克在一起。 

00:01:10.030 --> 00:01:12.390
但更重要的是大型Chrome。 

00:01:12.390 --> 00:01:15.140
只需单击它即可订阅。 

