WEBVTT
Kind: captions
Language: zh-Hans

00:00:09.230 --> 00:00:11.830
告诉我，马特，让您退缩的唯一优势是什么

00:00:11.830 --> 00:00:13.700
对于本机应用程序？ 

00:00:13.700 --> 00:00:15.250
通常在没有Internet的情况下获得支持。 

00:00:15.250 --> 00:00:16.731
就是这种情况

00:00:16.731 --> 00:00:18.730
在网络薄弱的地方， 

00:00:18.730 --> 00:00:19.825
并祝他们工作。 

00:00:19.825 --> 00:00:20.530
是的

00:00:20.530 --> 00:00:21.320
这些是。 

00:00:21.320 --> 00:00:23.120
离线支持是唯一的选择

00:00:23.120 --> 00:00:25.510
这也使我回到了原始的应用程序。 

00:00:25.510 --> 00:00:27.540
在没有互联网的情况下，有些应用程序需要我的支持。 

00:00:27.540 --> 00:00:29.180
如新闻和更多。 

00:00:29.180 --> 00:00:30.680
但是可能-我不知道

00:00:30.680 --> 00:00:33.970
新一代使用很多应用程序，而我却不使用，例如约会应用程序。 

00:00:33.970 --> 00:00:36.180
在我的日子里，你不得不在城市里走来走去

00:00:36.180 --> 00:00:40.790
带着扩音器大喊：为什么没人要我？ 

00:00:40.790 --> 00:00:43.590
我认为您做错了。我不再通知您。 

00:00:43.590 --> 00:00:45.112
你可能是对的。 

00:00:45.112 --> 00:00:48.052
用户将离线访问您的页面。 

00:00:48.052 --> 00:00:50.010
最有可能会遇到问题

00:00:50.010 --> 00:00:51.930
他发现网络薄弱的地方。 

00:00:51.930 --> 00:00:54.530
也许在乘火车或开会时

00:00:54.530 --> 00:00:55.250
或在旅馆里。 

00:00:55.250 --> 00:00:55.970
是的

00:00:55.970 --> 00:00:56.680
没错

00:00:56.680 --> 00:00:58.084
过去我们有可能

00:00:58.084 --> 00:01:00.225
类似于不支持的缓存应用程序。 

00:01:00.225 --> 00:01:01.940
修改它是一场噩梦。 

00:01:01.940 --> 00:01:03.290
是的，几乎没有人使用过它。 

00:01:03.290 --> 00:01:06.290
一个传奇的杰克博客。 

00:01:06.290 --> 00:01:07.640
 “愚蠢的缓存” 

00:01:07.640 --> 00:01:08.440
是的

00:01:08.440 --> 00:01:09.156
是的

00:01:09.156 --> 00:01:10.566
我们目前处于更好的位置。 

00:01:10.566 --> 00:01:12.860
现在，我们有了新的API工具，例如Service Worker。 

00:01:12.860 --> 00:01:14.850
服务人员是一个脚本

00:01:14.850 --> 00:01:17.270
您的浏览器在后台运行。 

00:01:17.270 --> 00:01:20.820
它为许多新的可能性打开了大门。 

00:01:20.820 --> 00:01:21.530
是啊

00:01:21.530 --> 00:01:22.620
有推送通知， 

00:01:22.620 --> 00:01:23.760
没有互联网的支持， 

00:01:23.760 --> 00:01:24.821
并在后台同步。 

00:01:24.821 --> 00:01:27.170
其他好处也将添加

00:01:27.170 --> 00:01:27.890
即将推出。 

00:01:27.890 --> 00:01:28.610
是的

00:01:28.610 --> 00:01:30.950
此API工具质量低下

00:01:30.950 --> 00:01:32.556
允许您拦截网络请求

00:01:32.556 --> 00:01:34.705
并控制缓存中发生的事情。 

00:01:34.705 --> 00:01:35.430
太好了

00:01:35.430 --> 00:01:36.169
是的

00:01:36.169 --> 00:01:38.130
现在我们有了一个网页，中间有一个服务人员， 

00:01:38.130 --> 00:01:39.379
在到达网络之前。 

00:01:39.379 --> 00:01:42.280
这样我们就可以控制从中流出的流量， 

00:01:42.280 --> 00:01:44.270
或阻止某些东西进入网络

00:01:44.270 --> 00:01:45.950
它从临时存储器返回。 

00:01:45.950 --> 00:01:48.420
制作应用程序的第一步

00:01:48.420 --> 00:01:51.320
服务人员用于注册

00:01:51.320 --> 00:01:52.270
服务人员文本。 

00:01:52.270 --> 00:01:55.050
这需要后台功能， 

00:01:55.050 --> 00:01:57.040
无需打开网页。 

00:01:57.040 --> 00:01:57.770
是的

00:01:57.770 --> 00:01:59.110
您只需保持浏览器通知

00:01:59.110 --> 00:02:01.867
那是Japascript的Server Worker文件。 

00:02:01.867 --> 00:02:03.700
您如何看待某些脚本？ 

00:02:03.700 --> 00:02:05.050
您一开始会做的事情

00:02:05.050 --> 00:02:07.508
是为了确保社会工作者得到支持， 

00:02:07.508 --> 00:02:09.960
所以我们写“如果ServerWorker在导航器中” 

00:02:09.960 --> 00:02:11.700
假设它受支持，您只需要编写

00:02:11.700 --> 00:02:13.310
 navigator.servic eWorker.register 

00:02:13.310 --> 00:02:16.010
并浏览您的Service Worker文件。 

00:02:16.010 --> 00:02:17.950
在这里，我们仅使用Promises。 

00:02:17.950 --> 00:02:20.380
然后，它在缓存中说是否有效。 

00:02:20.380 --> 00:02:22.400
这就是一切。 

00:02:22.400 --> 00:02:24.870
我们在这里关注的最重要的事情

00:02:24.870 --> 00:02:27.021
是他们使用高级开发。 

00:02:27.021 --> 00:02:29.270
因此，如果您使用的浏览器不支持Service Worker， 

00:02:29.270 --> 00:02:30.990
未调用该浏览器。 

00:02:30.990 --> 00:02:32.520
你在同一个地方

00:02:32.520 --> 00:02:33.780
没有服务人员。 

00:02:33.780 --> 00:02:34.490
是的

00:02:34.490 --> 00:02:36.497
这样您就可以获得与Internet相同的体验

00:02:36.497 --> 00:02:37.640
没有服务人员。 

00:02:37.640 --> 00:02:39.614
那服务人员文本呢？ 

00:02:39.614 --> 00:02:42.122
启动后，浏览器将

00:02:42.122 --> 00:02:44.330
获取您的Service Worker文件

00:02:44.330 --> 00:02:46.920
然后在页面背景中运行

00:02:46.920 --> 00:02:49.378
在这种情况下，您首先要做的是

00:02:49.378 --> 00:02:51.630
是您将管理安装效率

00:02:51.630 --> 00:02:53.490
因此，我们将编写self.addEventListener 

00:02:53.490 --> 00:02:57.280
因此，您只需将事件添加到Service Worker中即可。 

00:02:57.280 --> 00:03:00.340
当您要打开缓存时，将键入caches.open。 

00:03:00.340 --> 00:03:01.795
然后，您将其称为名称。 

00:03:01.795 --> 00:03:03.920
这很重要，因为随着时间的流逝

00:03:03.920 --> 00:03:05.160
您需要制作不同的版本。 

00:03:05.160 --> 00:03:05.870
那是什么

00:03:05.870 --> 00:03:06.818
命名空间，对不对？ 

00:03:06.818 --> 00:03:07.520
是的

00:03:07.520 --> 00:03:09.730
一旦有了缓存对象

00:03:09.730 --> 00:03:11.037
该命令将执行cache.addAll 

00:03:11.037 --> 00:03:12.620
这是一个非常简单有用的方法

00:03:12.620 --> 00:03:16.040
因为您实际上要经过一行路径

00:03:16.040 --> 00:03:17.770
一切都在这个班上。 

00:03:17.770 --> 00:03:20.090
您从网络获取信息并将其存储在缓存中。 

00:03:20.090 --> 00:03:22.500
所以您要处理缓存API？ 

00:03:22.500 --> 00:03:23.220
是的

00:03:23.220 --> 00:03:25.220
因此，这与HTTP缓存不同。 

00:03:25.220 --> 00:03:26.870
您可以控制此缓存。 

00:03:26.870 --> 00:03:30.450
因此，不会删除，替换或添加任何内容， 

00:03:30.450 --> 00:03:33.280
直到您完全做到这一点。 

00:03:33.280 --> 00:03:33.990
是的

00:03:33.990 --> 00:03:35.990
唯一的障碍是

00:03:35.990 --> 00:03:38.890
如果添加随机文件，则在cache.addAll中

00:03:38.890 --> 00:03:42.420
网络服务器不接受它并显示错误代码， 

00:03:42.420 --> 00:03:44.442
这将导致安装事件失败。 

00:03:44.442 --> 00:03:45.900
安装效果不佳意味着

00:03:45.900 --> 00:03:47.310
社会工作者不会证明

00:03:47.310 --> 00:03:49.559
这意味着将不会使用该网页。 

00:03:49.559 --> 00:03:51.100
这是一种安全机制。 

00:03:51.100 --> 00:03:53.016
如果某事碰巧是有效的， 

00:03:53.016 --> 00:03:55.860
 Service Worker完全不会影响您的页面。 

00:03:55.860 --> 00:03:59.260
将重试，但不会影响页面。 

00:03:59.260 --> 00:04:01.414
这与安装的有效性有关。 

00:04:01.414 --> 00:04:03.830
实际上，如果没有互联网，这将无法为您提供支持， 

00:04:03.830 --> 00:04:04.913
因为不使用。 

00:04:04.913 --> 00:04:07.050
没什么可说的，我使用缓存

00:04:07.050 --> 00:04:08.320
响应网络。 

00:04:08.320 --> 00:04:10.080
因此召回的有效性

00:04:10.080 --> 00:04:11.150
太好了！ 

00:04:11.150 --> 00:04:14.179
该调用使用新的API调用属性，对吗？ 

00:04:14.179 --> 00:04:15.345
是的，在这个例子中。 

00:04:15.345 --> 00:04:17.576
但是可惜存在

00:04:17.576 --> 00:04:18.950
所谓的抓取事件， 

00:04:18.950 --> 00:04:21.300
还有所谓的Fetch API，因为它显然适合他们

00:04:21.300 --> 00:04:22.084
同名。 

00:04:22.084 --> 00:04:23.250
它们有些不同。 

00:04:23.250 --> 00:04:24.954
因此，提取事件将开始工作。 

00:04:24.954 --> 00:04:26.620
原则上，只要

00:04:26.620 --> 00:04:29.465
由Service Worker控制的页面已下订单。 

00:04:29.465 --> 00:04:32.170
以及页面上的任何内容，无论是图像，布局还是其他任何内容， 

00:04:32.170 --> 00:04:34.680
将通过此活动。 

00:04:34.680 --> 00:04:37.250
这就是我们所谓的caches.match 

00:04:37.250 --> 00:04:38.900
这是一个非常简单有用的方法

00:04:38.900 --> 00:04:40.672
您问：有这样的要求吗

00:04:40.672 --> 00:04:42.130
缓存中的任何内容

00:04:42.130 --> 00:04:44.360
他能回应她吗？ 

00:04:44.360 --> 00:04:48.320
然后如果有回应

00:04:48.320 --> 00:04:49.170
我们会说回报

00:04:49.170 --> 00:04:51.230
如果没有，我们将说返回获取。 

00:04:51.230 --> 00:04:53.802
在这里，我们编写提取API。 

00:04:53.802 --> 00:04:55.510
他们就像XHL。 

00:04:55.510 --> 00:04:57.590
所以她去了网络， 

00:04:57.590 --> 00:04:58.580
寻找并返回。 

00:04:58.580 --> 00:05:01.030
这将转到浏览器。 

00:05:01.030 --> 00:05:02.840
仅这两个步骤， 

00:05:02.840 --> 00:05:05.430
如果您将所有内容存储在缓存中，它将为您提供脱机支持。 

00:05:05.430 --> 00:05:06.140
知道了

00:05:06.140 --> 00:05:07.260
准备好一切之后， 

00:05:07.260 --> 00:05:09.140
您要确保服务人员

00:05:09.140 --> 00:05:10.820
运作良好， 

00:05:10.820 --> 00:05:12.220
去潜水，然后去开发工具

00:05:12.220 --> 00:05:13.040
是的

00:05:13.040 --> 00:05:16.050
要发布您的应用，请确保它可以运行， 

00:05:16.050 --> 00:05:20.730
转到网络限制并选择离线

00:05:20.730 --> 00:05:21.450
 p 

00:05:21.450 --> 00:05:24.220
如果您重新加载页面， 

00:05:24.700 --> 00:05:26.928
是的，我们可以播放令人讨厌的空气喇叭声音

00:05:28.355 --> 00:05:30.640
这不仅适用于您的桌面，对吗？ 

00:05:30.640 --> 00:05:33.570
它也应该在电话上工作。 

00:05:35.530 --> 00:05:37.430
这是有史以来最酷的事情。 

00:05:37.430 --> 00:05:38.180
总体而言。 

00:05:38.180 --> 00:05:39.585
现在我们知道它不需要互联网

00:05:39.585 --> 00:05:40.900
太棒了

00:05:40.900 --> 00:05:43.140
这是一个很高的水平

00:05:43.140 --> 00:05:46.287
有一个更好的地方来获取所有这些信息， 

00:05:46.287 --> 00:05:48.120
关于通过服务人员

00:05:48.120 --> 00:05:49.920
它还涵盖了一些缺陷， 

00:05:49.920 --> 00:05:52.470
除了激活步骤外，我们没有为此分支。 

00:05:52.470 --> 00:05:53.190
是的

00:05:53.190 --> 00:05:56.440
如果您想了解更多有关此信息，请转到Service Worker Offline Collab 

00:05:56.440 --> 00:05:58.450
在Web基础知识上。 

